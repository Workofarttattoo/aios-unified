<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ai|oS - Sovereign Desktop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0a;
            color: #00ff88;
            overflow: hidden;
            height: 100vh;
        }

        /* Desktop Window Container */
        .desktop-window {
            position: absolute;
            top: 50px;
            left: 50px;
            width: calc(100% - 100px);
            height: calc(100% - 100px);
            background: #000;
            border: 2px solid #00ff88;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 50px rgba(0, 255, 136, 0.5);
            overflow: hidden;
        }

        .desktop-window.fullscreen {
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 0;
        }

        /* Window Title Bar */
        .window-titlebar {
            height: 40px;
            background: rgba(0, 255, 136, 0.1);
            border-bottom: 1px solid #00ff88;
            display: flex;
            align-items: center;
            padding: 0 15px;
            cursor: move;
            user-select: none;
        }

        .window-title {
            flex: 1;
            font-size: 14px;
            font-weight: bold;
            color: #00ff88;
        }

        .window-controls {
            display: flex;
            gap: 10px;
        }

        .window-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            transition: all 0.2s;
        }

        .minimize-btn { background: #ffaa00; }
        .maximize-btn { background: #00ff88; }
        .close-btn { background: #ff0066; }

        .window-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 0 10px currentColor;
        }

        /* Desktop Content Area */
        .desktop-content {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        /* Background Canvas */
        #bgCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* App Display Area */
        .app-display {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: calc(100% - 60px);
            z-index: 5;
            display: none;
            padding: 20px;
            overflow-y: auto;
        }

        .app-display.active {
            display: block;
        }

        /* Taskbar */
        .taskbar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background: rgba(0, 0, 0, 0.95);
            border-top: 2px solid #00ff88;
            z-index: 100;
            display: flex;
            align-items: center;
            padding: 0 10px;
        }

        /* Start Button */
        .start-button {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            color: #000;
        }

        .start-button:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(0, 255, 136, 1);
        }

        /* Start Menu */
        .start-menu {
            position: absolute;
            bottom: 70px;
            left: 10px;
            width: 450px;
            max-height: 500px;
            background: rgba(5, 5, 5, 0.98);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 15px;
            display: none;
            box-shadow: 0 0 40px rgba(0, 255, 136, 0.7);
            overflow-y: auto;
        }

        .start-menu.show {
            display: block;
            animation: slideUp 0.2s ease-out;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .menu-header {
            font-size: 18px;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 15px;
            text-align: center;
        }

        .menu-category {
            margin-bottom: 15px;
        }

        .category-title {
            font-size: 13px;
            font-weight: bold;
            color: #ff00ff;
            padding: 8px;
            background: rgba(255, 0, 255, 0.1);
            border-left: 3px solid #ff00ff;
            cursor: pointer;
            margin-bottom: 5px;
        }

        .category-title:hover {
            background: rgba(255, 0, 255, 0.2);
        }

        .category-apps {
            padding-left: 10px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s;
        }

        .category-apps.expanded {
            max-height: 400px;
        }

        .app-item {
            padding: 8px;
            margin: 3px 0;
            background: rgba(0, 255, 136, 0.05);
            border: 1px solid rgba(0, 255, 136, 0.2);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .app-item:hover {
            background: rgba(0, 255, 136, 0.15);
            border-color: #00ff88;
            transform: translateX(5px);
        }

        /* Settings Toggle */
        .settings-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid #00ff88;
            border-radius: 5px;
            padding: 10px;
            z-index: 50;
            font-size: 11px;
        }

        .settings-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .toggle-switch {
            width: 40px;
            height: 20px;
            background: #333;
            border-radius: 10px;
            position: relative;
            cursor: pointer;
            transition: background 0.3s;
        }

        .toggle-switch.active {
            background: #00ff88;
        }

        .toggle-slider {
            width: 16px;
            height: 16px;
            background: #fff;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: left 0.3s;
        }

        .toggle-switch.active .toggle-slider {
            left: 22px;
        }

        /* App Interface Styles */
        .app-interface {
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
            color: #00ff88;
        }

        .app-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #00ff88;
        }

        .app-section {
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 255, 136, 0.05);
            border-left: 3px solid #00ff88;
        }

        .control-group {
            margin: 10px 0;
        }

        .control-label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #00d4ff;
        }

        input[type="text"], input[type="number"], textarea, select {
            width: 100%;
            padding: 8px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff88;
            border-radius: 5px;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #00ff88, #00d4ff);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0, 255, 136, 0.5);
        }

        .output-panel {
            margin-top: 15px;
            padding: 15px;
            background: #000;
            border: 1px solid #00ff88;
            border-radius: 5px;
            min-height: 150px;
            max-height: 300px;
            overflow-y: auto;
            font-size: 11px;
            white-space: pre-wrap;
        }

        .resize-handle {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 20px;
            height: 20px;
            cursor: nwse-resize;
            z-index: 1000;
        }

        .resize-handle::after {
            content: '‚ã∞';
            color: #00ff88;
            font-size: 16px;
            position: absolute;
            bottom: 2px;
            right: 2px;
        }

        /* System Tray */
        .system-tray {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-left: auto;
            font-size: 11px;
        }

        .settings-icon {
            width: 30px;
            height: 30px;
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .settings-icon:hover {
            background: rgba(0, 255, 136, 0.4);
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.6);
        }

        .clock {
            color: #00ff88;
            font-weight: bold;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #000;
        }

        ::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="desktop-window" id="desktopWindow">
        <!-- Window Title Bar -->
        <div class="window-titlebar" id="titlebar">
            <div class="window-title">Ai|oS - Sovereign Desktop</div>
            <div class="window-controls">
                <div class="window-btn minimize-btn" onclick="minimizeWindow()">‚àí</div>
                <div class="window-btn maximize-btn" onclick="toggleMaximize()">‚ñ°</div>
                <div class="window-btn close-btn" onclick="closeWindow()">√ó</div>
            </div>
        </div>

        <!-- Desktop Content -->
        <div class="desktop-content">
            <!-- Background Canvas -->
            <canvas id="bgCanvas"></canvas>

            <!-- Settings Panel -->
            <div class="settings-panel">
                <div class="settings-toggle">
                    <span>Popup Mode:</span>
                    <div class="toggle-switch" id="popupToggle" onclick="togglePopupMode()">
                        <div class="toggle-slider"></div>
                    </div>
                </div>
                <div style="font-size: 10px; color: #666;">
                    OFF = Apps transform desktop<br>
                    ON = Apps open in popups
                </div>
            </div>

            <!-- App Displays (one for each app) -->
            <div class="app-display" id="app-aurorascan">
                <div class="app-interface">
                    <div class="app-title">üîç AuroraScan - Network Reconnaissance</div>
                    <div class="app-section">
                        <div class="control-group">
                            <label class="control-label">Target Network/IP:</label>
                            <input type="text" placeholder="192.168.1.0/24" id="aurora-target">
                        </div>
                        <div class="control-group">
                            <label class="control-label">Scan Profile:</label>
                            <select id="aurora-profile">
                                <option>Quick Scan</option>
                                <option>Deep Recon</option>
                                <option>Stealth</option>
                                <option>Full Discovery</option>
                            </select>
                        </div>
                        <button onclick="runAuroraScan()">üöÄ Start Scan</button>
                    </div>
                    <div class="output-panel" id="aurora-output">Ready to scan...</div>
                </div>
            </div>

            <div class="app-display" id="app-cipherspear">
                <div class="app-interface">
                    <div class="app-title">üíâ CipherSpear - Database Injection Analysis</div>
                    <div class="app-section">
                        <div class="control-group">
                            <label class="control-label">Database DSN:</label>
                            <input type="text" placeholder="postgresql://user@localhost/dbname" id="cipher-dsn">
                        </div>
                        <div class="control-group">
                            <label class="control-label">Test Query:</label>
                            <textarea rows="3" placeholder="SELECT * FROM users WHERE id = ?" id="cipher-query"></textarea>
                        </div>
                        <button onclick="runCipherSpear()">üéØ Analyze Injection Points</button>
                    </div>
                    <div class="output-panel" id="cipher-output">Ready to analyze...</div>
                </div>
            </div>

            <div class="app-display" id="app-quantumlab">
                <div class="app-interface">
                    <div class="app-title">üîÆ Quantum Lab - 50 Qubit Simulation</div>
                    <div class="app-section">
                        <div class="control-group">
                            <label class="control-label">Number of Qubits:</label>
                            <input type="number" value="5" min="1" max="50" id="qlab-qubits">
                        </div>
                        <div class="control-group">
                            <label class="control-label">Algorithm:</label>
                            <select id="qlab-algo">
                                <option>VQE (Variational Quantum Eigensolver)</option>
                                <option>HHL (Linear Systems Solver)</option>
                                <option>Grover Search</option>
                                <option>Quantum Teleportation</option>
                            </select>
                        </div>
                        <button onclick="runQuantumLab()">‚öõÔ∏è Execute Quantum Circuit</button>
                    </div>
                    <div class="output-panel" id="qlab-output">Quantum backend ready...</div>
                </div>
            </div>

            <!-- Add more app displays here -->

            <!-- Start Menu -->
            <div class="start-menu" id="startMenu">
                <div class="menu-header">Ai|oS APPLICATIONS</div>

                <div class="menu-category">
                    <div class="category-title" onclick="toggleCategory(this)">üåê Network Security</div>
                    <div class="category-apps">
                        <div class="app-item" onclick="launchApp('aurorascan')">
                            <span>üîç</span>
                            <span>AuroraScan - Network Reconnaissance</span>
                        </div>
                        <div class="app-item" onclick="launchApp('skybreaker')">
                            <span>üì°</span>
                            <span>SkyBreaker - Wireless Auditing</span>
                        </div>
                        <div class="app-item" onclick="launchApp('spectratrace')">
                            <span>üìä</span>
                            <span>SpectraTrace - Packet Inspection</span>
                        </div>
                    </div>
                </div>

                <div class="menu-category">
                    <div class="category-title" onclick="toggleCategory(this)">üõ°Ô∏è Application Security</div>
                    <div class="category-apps">
                        <div class="app-item" onclick="launchApp('cipherspear')">
                            <span>üíâ</span>
                            <span>CipherSpear - Injection Analysis</span>
                        </div>
                        <div class="app-item" onclick="launchApp('nemesishydra')">
                            <span>üîê</span>
                            <span>NemesisHydra - Auth Testing</span>
                        </div>
                        <div class="app-item" onclick="launchApp('mythickey')">
                            <span>üîë</span>
                            <span>MythicKey - Credential Analysis</span>
                        </div>
                    </div>
                </div>

                <div class="menu-category">
                    <div class="category-title" onclick="toggleCategory(this)">‚öõÔ∏è Quantum Computing</div>
                    <div class="category-apps">
                        <div class="app-item" onclick="launchApp('quantumlab')">
                            <span>üîÆ</span>
                            <span>Quantum Lab - 50 Qubit Sim</span>
                        </div>
                        <div class="app-item" onclick="launchApp('oracle')">
                            <span>üåü</span>
                            <span>Probabilistic Oracle</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Taskbar -->
            <div class="taskbar">
                <div class="start-button" onclick="toggleStartMenu()">Ai</div>
                <div class="system-tray">
                    <span style="color: #00d4ff;">Vol Alerts: 0</span>
                    <span style="color: #00ff88;">Qubits: 50</span>
                    <div class="settings-icon" onclick="openSettings()" title="Settings">‚öôÔ∏è</div>
                    <span class="clock" id="clock">00:00:00</span>
                </div>
            </div>
        </div>

        <!-- Resize Handle -->
        <div class="resize-handle" id="resizeHandle"></div>
    </div>

    <script>
        // ============================================================
        // SETTINGS
        // ============================================================
        let popupMode = false;
        let currentApp = null;

        function togglePopupMode() {
            popupMode = !popupMode;
            document.getElementById('popupToggle').classList.toggle('active');
        }

        // ============================================================
        // WINDOW DRAGGING
        // ============================================================
        let isDragging = false;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        const titlebar = document.getElementById('titlebar');
        const desktopWindow = document.getElementById('desktopWindow');

        titlebar.addEventListener('mousedown', (e) => {
            if (desktopWindow.classList.contains('fullscreen')) return;
            isDragging = true;
            dragOffsetX = e.clientX - desktopWindow.offsetLeft;
            dragOffsetY = e.clientY - desktopWindow.offsetTop;
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            desktopWindow.style.left = (e.clientX - dragOffsetX) + 'px';
            desktopWindow.style.top = (e.clientY - dragOffsetY) + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // ============================================================
        // WINDOW RESIZING
        // ============================================================
        let isResizing = false;
        const resizeHandle = document.getElementById('resizeHandle');

        resizeHandle.addEventListener('mousedown', (e) => {
            if (desktopWindow.classList.contains('fullscreen')) return;
            isResizing = true;
            e.stopPropagation();
        });

        document.addEventListener('mousemove', (e) => {
            if (!isResizing) return;
            const rect = desktopWindow.getBoundingClientRect();
            const newWidth = e.clientX - rect.left;
            const newHeight = e.clientY - rect.top;
            if (newWidth > 400) desktopWindow.style.width = newWidth + 'px';
            if (newHeight > 300) desktopWindow.style.height = newHeight + 'px';
            resizeCanvas();
        });

        document.addEventListener('mouseup', () => {
            isResizing = false;
        });

        // ============================================================
        // WINDOW CONTROLS
        // ============================================================
        function minimizeWindow() {
            desktopWindow.style.display = 'none';
            setTimeout(() => desktopWindow.style.display = 'flex', 100);
        }

        function toggleMaximize() {
            desktopWindow.classList.toggle('fullscreen');
            resizeCanvas();
        }

        function closeWindow() {
            if (confirm('Close Ai|oS Desktop?')) {
                window.close();
            }
        }

        // ============================================================
        // START MENU
        // ============================================================
        function toggleStartMenu() {
            document.getElementById('startMenu').classList.toggle('show');
        }

        function toggleCategory(el) {
            el.nextElementSibling.classList.toggle('expanded');
        }

        // ============================================================
        // APP LAUNCHING
        // ============================================================
        function launchApp(appName) {
            document.getElementById('startMenu').classList.remove('show');

            if (popupMode) {
                // Open in popup window
                const popup = window.open('', appName, 'width=800,height=600');
                popup.document.write(`<h1>Opening ${appName}...</h1>`);
            } else {
                // Transform desktop into app
                const apps = document.querySelectorAll('.app-display');
                apps.forEach(app => app.classList.remove('active'));

                const targetApp = document.getElementById(`app-${appName}`);
                if (targetApp) {
                    targetApp.classList.add('active');
                    currentApp = appName;
                    document.querySelector('.window-title').textContent = `Ai|oS - ${appName}`;
                }
            }
        }

        // ============================================================
        // APP FUNCTIONS
        // ============================================================
        function runAuroraScan() {
            const target = document.getElementById('aurora-target').value;
            const profile = document.getElementById('aurora-profile').value;
            const output = document.getElementById('aurora-output');

            output.textContent = `[*] Starting AuroraScan...\n`;
            output.textContent += `[*] Target: ${target}\n`;
            output.textContent += `[*] Profile: ${profile}\n`;
            output.textContent += `[*] Discovering hosts...\n`;

            setTimeout(() => {
                output.textContent += `[+] Found 12 active hosts\n`;
                output.textContent += `[+] Scanning ports...\n`;
                output.textContent += `[+] 192.168.1.1 - Ports: 22, 80, 443 OPEN\n`;
                output.textContent += `[+] 192.168.1.5 - Ports: 3306, 8080 OPEN\n`;
                output.textContent += `[‚úì] Scan complete!\n`;
            }, 2000);
        }

        function runCipherSpear() {
            const dsn = document.getElementById('cipher-dsn').value;
            const query = document.getElementById('cipher-query').value;
            const output = document.getElementById('cipher-output');

            output.textContent = `[*] Analyzing injection points...\n`;
            output.textContent += `[*] DSN: ${dsn}\n`;
            output.textContent += `[*] Testing query: ${query}\n`;

            setTimeout(() => {
                output.textContent += `[!] Potential SQL injection found!\n`;
                output.textContent += `[+] Payload: ' OR '1'='1\n`;
                output.textContent += `[+] Vulnerable parameter detected\n`;
                output.textContent += `[‚úì] Analysis complete!\n`;
            }, 2000);
        }

        function runQuantumLab() {
            const qubits = document.getElementById('qlab-qubits').value;
            const algo = document.getElementById('qlab-algo').value;
            const output = document.getElementById('qlab-output');

            output.textContent = `[*] Initializing ${qubits} qubit quantum circuit...\n`;
            output.textContent += `[*] Algorithm: ${algo}\n`;
            output.textContent += `[*] Building circuit gates...\n`;

            setTimeout(() => {
                output.textContent += `[+] Circuit compiled successfully\n`;
                output.textContent += `[+] Running simulation on statevector backend...\n`;
                output.textContent += `[+] Expectation value: 0.8234\n`;
                output.textContent += `[‚úì] Quantum execution complete!\n`;
            }, 2000);
        }

        // ============================================================
        // BACKGROUND ANIMATION
        // ============================================================
        const canvas = document.getElementById('bgCanvas');
        const ctx = canvas.getContext('2d');

        function resizeCanvas() {
            const content = document.querySelector('.desktop-content');
            canvas.width = content.clientWidth;
            canvas.height = content.clientHeight;
        }
        resizeCanvas();

        const particles = [];
        for (let i = 0; i < 50; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 1.5,
                vy: (Math.random() - 0.5) * 1.5,
                size: Math.random() * 2 + 1
            });
        }

        function animate() {
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fillStyle = '#00ff88';
                ctx.shadowBlur = 8;
                ctx.shadowColor = '#00ff88';
                ctx.fill();
                ctx.shadowBlur = 0;
            });

            requestAnimationFrame(animate);
        }
        animate();

        // ============================================================
        // CLOCK
        // ============================================================
        function updateClock() {
            document.getElementById('clock').textContent = new Date().toTimeString().slice(0, 8);
        }
        setInterval(updateClock, 1000);
        updateClock();

        // ============================================================
        // SETTINGS
        // ============================================================
        function openSettings() {
            // Open settings desktop in same window
            window.location.href = 'settings_desktop_visualizer.html';
        }

        // Close menu on outside click
        document.addEventListener('click', (e) => {
            const menu = document.getElementById('startMenu');
            if (!menu.contains(e.target) && !e.target.closest('.start-button')) {
                menu.classList.remove('show');
            }
        });
    </script>
</body>
</html>
